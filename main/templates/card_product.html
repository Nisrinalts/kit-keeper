{# templates/card_product.html #}

<div>
  <!-- WRAPPER: warna dari loop + ukuran photocard di desktop -->
  <div class="rounded-[18px] p-3 sm:p-4 {{ cardbg }} border border-black/10 shadow-[0_8px_20px_rgba(0,0,0,.12)]
            w-full md:w-[300px] md:h-[460px] md:flex md:flex-col md:gap-2
            transition-all duration-300 hover:shadow-[0_12px_24px_rgba(0,0,0,.18)] hover:-translate-y-1">

    <!-- Grid lama (mobile) -> kolom tunggal di desktop -->
    <div class="grid gap-2 sm:gap-3 grid-cols-1 sm:grid-cols-[160px_1fr] items-stretch md:grid-cols-1 md:contents">

      {# LEFT (mobile: top) — image #}
      <div class="border-[1.5px] border-black/20 rounded-xl overflow-hidden bg-[#f6f6f6]
                  aspect-[4/3] sm:aspect-auto sm:h-[130px]
                  md:h-[66%] md:aspect-auto">
        {% if product.thumbnail %}
          <img src="{{ product.thumbnail }}" alt="{{ product.name }}" class="w-full h-full object-cover block">
        {% else %}
          <div class="w-full h-full flex items-center justify-center text-[#888]">No Image</div>
        {% endif %}
      </div>

      {# RIGHT — text + price + action #}
      <div class="border-[1.5px] border-black/20 rounded-xl p-2.5 sm:p-3 grid gap-2
                  md:h-[34%] md:grid-rows-[auto_1px_auto_1fr_auto] min-w-0 overflow-hidden">
        <div class="flex flex-col items-start gap-1 min-w-0">
          <span class="inline-block text-[0.68rem] tracking-[0.06em] uppercase bg-white border border-black/10 py-[0.16rem] px-2 rounded-full">
            Product {{ counter }}
          </span>
          <h3 class="m-0 text-[1rem] sm:text-[1.1rem] md:text-[1rem] leading-tight font-semibold
                    break-words hyphens-auto">
            {{ product.name }}
          </h3>
        </div>

        <div class="w-full h-px bg-black/20"></div>

        <div class="space-y-1 min-w-0">
          <p class="m-0 text-[#222] text-[0.9rem]">
            {% if product.category %}{{ product.get_category_display|default:product.category }}{% endif %}
            {% if product.team %} — {{ product.team }}{% endif %}
          </p>

          <div class="mt-1 flex items-center justify-between">
            <p class="m-0 font-bold" style="color:#AF6E4E">
              Rp <span class="kk-idr" data-idr="{{ product.price|default:0 }}">{{ product.price }}</span>
            </p>

            <a href="{% url 'main:show_product' product.id %}"
              class="ml-3 shrink-0 inline-flex items-center justify-center px-3 py-1.5 text-[0.85rem]
                      bg-white text-primary border border-primary rounded-xl
                      hover:bg-[#ffb6c1] hover:text-white hover:border-[#ffb6c1] transition-colors">
              Detail
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
