{# templates/card_product.html #}
<div>
  <div class="relative rounded-[14px] border border-black/10 shadow-[0_6px_16px_rgba(0,0,0,0.06)] p-2 sm:p-3 {{ cardbg }}">
    <div class="grid gap-2 sm:gap-3 grid-cols-1 sm:grid-cols-[140px_1fr] items-stretch">
      
      {# LEFT (mobile: top) — image #}
      <div class="border-[1.5px] border-black/20 rounded-xl overflow-hidden bg-[#f6f6f6] aspect-[4/3] sm:aspect-auto sm:h-[110px]">
        {% if product.thumbnail %}
          <img src="{{ product.thumbnail }}" alt="{{ product.name }}" class="w-full h-full object-cover block">
        {% else %}
          <div class="w-full h-full flex items-center justify-center text-[#888]">No Image</div>
        {% endif %}
      </div>

      {# RIGHT — text + actions #}
      <div class="border-[1.5px] border-black/20 rounded-xl p-2.5 sm:p-3 grid gap-2">
        <div class="flex flex-col items-start gap-1">
          <span class="inline-block text-[0.7rem] tracking-[0.06em] uppercase bg-white border border-black/10 py-[0.16rem] px-2 rounded-full">
            Product {{ counter }}
          </span>
          <h3 class="m-0 text-[1.05rem] sm:text-[1.2rem] leading-tight font-bold">{{ product.name }}</h3>
        </div>

        <div class="w-full h-px bg-black/20"></div>

        <div class="grid grid-cols-1 sm:grid-cols-[1fr_auto] items-start sm:items-center gap-2">
          <p class="m-0 text-[#222] text-[0.9rem]">
            {% if product.category %}{{ product.get_category_display|default:product.category }}{% endif %}
            {% if product.team %} — {{ product.team }}{% endif %}
          </p>

          <div class="flex flex-wrap sm:flex-nowrap items-center justify-start sm:justify-end gap-2">
            <a href="{% url 'main:show_product' product.id %}"
               class="inline-flex items-center justify-center px-3 py-1.5 text-[0.85rem] bg-white text-primary border border-primary rounded-xl
                      hover:bg-[#ffb6c1] hover:text-white hover:border-[#ffb6c1] transition-colors">
              Detail
            </a>

            {% if user.is_authenticated and product.user_id == user.id %}
            <a href="{% url 'main:edit_product' product.id %}"
              class="px-3 py-2 rounded-lg bg-amber-500 text-white hover:bg-amber-600">
              Edit
            </a>
          {% endif %}

            {% if user.is_authenticated and product.user_id == user.id %}
            <form action="{% url 'main:delete_product' product.id %}" method="post" class="inline">
              {% csrf_token %}
              <button type="submit"
                onclick="return confirm('Are you sure you want to delete {{ product.name }}? This action cannot be undone.');"
                class="px-3 py-2 rounded-lg bg-rose-500 text-white hover:bg-rose-600">
                Delete
              </button>
            </form>
          {% endif %}
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
