{% extends 'base.html' %}

{% block title %}{{ product.name }} — KitKeeper{% endblock %}

{% block content %}
<!-- FULL-BLEED PINK BG -->
<div class="fixed inset-0 -z-10 bg-kk-pink"></div>

<div class="min-h-screen flex items-start md:items-center">
  <div class="w-full max-w-[980px] mx-auto px-3 sm:p-4">
    <!-- Kartu dalem -->
    <div class="bg-kk-peach rounded-[20px] p-5 sm:p-6 md:p-8 shadow-[0_12px_32px_rgba(0,0,0,0.12)]">

      <!-- Back -->
      <a href="{% url 'main:show_main' %}"
         class="inline-flex items-center gap-2 mb-4 md:mb-6 px-4 py-2 rounded-[12px]
                bg-white border border-[#111827]/20 text-[#111827]
                hover:bg-[#ffb6c1] hover:text-white hover:border-[#ffb6c1] transition">
        ← Back
      </a>

      <div class="grid gap-6 md:gap-8 md:grid-cols-[1fr_auto]">
        <!-- LEFT: Detail -->
        <div>
          <h1 class="text-2xl md:text-[28px] md:leading-[34px] font-extrabold text-[#111827] mb-3 md:mb-4">
            {{ product.name }}
          </h1>

          <!-- grid label: value (lebih rapi di mobile) -->
          <div class="grid grid-cols-[110px_1fr] gap-x-3 gap-y-2 text-[#111827] text-sm sm:text-base">
            <span class="font-bold">Price:</span>
            <span>Rp <span class="kk-idr" data-idr="{{ product.price|default:0 }}">{{ product.price }}</span></span>
            <span class="font-bold">Category:</span>      <span>{{ product.get_category_display|default:product.category }}</span>
            <span class="font-bold">Description:</span>   <span>{{ product.description }}</span>
            <span class="font-bold">Size:</span>          <span>{{ product.get_size_display|default:"-" }}</span>
            <span class="font-bold">Sleeve:</span>        <span>{{ product.get_sleeve_type_display|default:"-" }}</span>
            <span class="font-bold">Team:</span>          <span>{{ product.team|default:"-" }}</span>
            <span class="font-bold">Season:</span>        <span>{{ product.season|default:"-" }}</span>
            <span class="font-bold">Condition:</span>     <span>{{ product.condition|default:"-" }}</span>
            <span class="font-bold">Manufacturer:</span>  <span>{{ product.manufacturer|default:"-" }}</span>
            <span class="font-bold">Stock:</span>         <span>{{ product.stock|default:"0" }}</span>
            <span class="font-bold">Owner:</span>         <span>{{ product.user|default:"None" }}</span>
          </div>
        </div>

        <!-- RIGHT: Foto (padding sama semua sisi, responsif) -->
        <div class="justify-self-center md:justify-self-start">
          <div class="w-full max-w-[340px] rounded-[16px] bg-white border border-black/10 shadow-[0_10px_26px_rgba(0,0,0,0.12)] p-4">
            <div class="w-full rounded-[12px] overflow-hidden bg-[#e5e7eb] aspect-square">
              {% if product.thumbnail %}
                <img src="{{ product.thumbnail }}" alt="{{ product.name }}" class="w-full h-full object-cover block">
              {% else %}
                <div class="w-full h-full flex items-center justify-center text-[#888]">
                  <em>No image</em>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>

      {% if user.is_authenticated and product.user_id == user.id %}
      <div class="mt-4 flex gap-2">
        <!-- EDIT -->
        <a href="{% url 'main:edit_product' product.id %}"
           class="inline-flex items-center justify-center px-4 py-2.5 rounded-[12px]
                  bg-white text-[#111827] border border-transparent
                  hover:bg-[#D2A3A9] hover:text-white transition-colors">
          Edit
        </a>
      
        <!-- DELETE -->
        <form action="{% url 'main:delete_product' product.id %}" method="post"
              onsubmit="return confirm('Delete {{ product.name }}? This cannot be undone.');">
          {% csrf_token %}
          <button type="submit"
            class="inline-flex items-center justify-center px-4 py-2.5 rounded-[12px]
                   bg-white text-[#111827] border border-transparent
                   hover:bg-[#E07A5F] hover:text-white transition-colors">
            Delete
          </button>
        </form>
      </div>      
    {% endif %}

    </div>
  </div>
</div>
{% endblock %}
